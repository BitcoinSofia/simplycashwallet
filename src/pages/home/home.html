<ion-header no-border  [attr.transparent]="isTransparent ? '' : null">

  <ion-navbar color="primary">
    <ion-title *ngIf="!wallet.getShowBalance()" (click)="wallet.setShowBalance(true)">
      simply cash
    </ion-title>
    <ion-title *ngIf="wallet.getShowBalance()" (click)="wallet.setShowBalance(false)">
      {{ (wallet.getCacheBalance().toString() | convertUnitPipe:wallet.getPreferredUnit():'comma':timestamp) || '--' }}
      {{ wallet.getPreferredUnit() }}
    </ion-title>
    <ion-buttons end>
      <button ion-button *ngIf="wallet.isConnecting() || wallet.isSyncing()">
        <ion-spinner color="light"></ion-spinner>
      </button>
      <button ion-button icon-only (click)="showMenu($event)">
        <ion-icon name="more"></ion-icon>
      </button>
    </ion-buttons>
  </ion-navbar>

</ion-header>


<ion-content no-bounce [attr.transparent]="isTransparent ? '' : null">
  <div class="flex-container">
    <ion-list>
      <ion-item>
        <ion-label stacked color="primary">{{ 'MY_BITCOIN_CASH_ADDRESS' | translate}}</ion-label>
        <ion-input
          class="address"
          [value]="address | convertAddressPipe:wallet.getPreferredAddressFormat()"
          type="text"
          (ionChange)="addressChange($event)"
          readonly></ion-input>
        <button ion-button item-end (click)="copyAddress()" outline>
          {{ 'COPY' | translate }}
        </button>
      </ion-item>
      <my-amount #myAmount label="{{ 'REQUEST_AMOUNT' | translate }}" (satoshisChange)="amountChange($event)"></my-amount>
    </ion-list>

    <div text-center>
      <img *ngIf="qrCodeURL" class="qrcode" [src]="qrCodeURL" (click)="share()"/>
    </div>

    <div class="camera-field" (touchstart)="startScan()" (touchend)="stopScan()">
      <ion-icon name="md-camera"></ion-icon>
    </div>
  </div>

  <div class="custom-footer">
    <ion-toolbar *ngIf="wallet.isOffline()">
      <p><ion-icon name="alert" color="danger"></ion-icon> {{ 'ERR_NOT_CONNECTED' | translate }}</p>
      <ion-buttons end>
        <button ion-button color="primary" (click)="reconnect($event)">{{ 'RETRY' | translate }}</button>
      </ion-buttons>
    </ion-toolbar>
  </div>

  <ion-chip
    class="quick-send-chip"
    [attr.elevated]="wallet.isOffline() ? '' : null"
    *ngIf="clipboardContent"
    (click)="quickSend()">
    <ion-icon name="paper-plane"></ion-icon>
    <ion-label>{{ 'COPIED_ADDRESS' | translate }}</ion-label>
    <button ion-button clear color="primary" (click)="clearClipboard(); $event.stopPropagation()">
      <ion-icon name="close"></ion-icon>
    </button>
  </ion-chip>

</ion-content>
